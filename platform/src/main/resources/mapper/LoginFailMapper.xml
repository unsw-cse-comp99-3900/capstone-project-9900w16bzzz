<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zzz.platform.api.login.domain.LoginFailDao">

    <!-- query by page -->
    <select id="queryPage" resultType="com.zzz.platform.api.login.domain.LoginFailVO">
        SELECT
        *
        FROM t_login_fail
        <where>
            <!--login name-->
            <if test="queryForm.loginName != null and queryForm.loginName != ''">
                AND INSTR(t_login_fail.login_name,#{queryForm.loginName})
            </if>
            <!--lock flag-->
            <if test="queryForm.lockFlag != null ">
                AND t_login_fail.lock_flag = #{queryForm.lockFlag}
            </if>
            <!--login lock begin time begin-->
            <if test="queryForm.loginLockBeginTimeBegin != null">
                AND DATE_FORMAT(t_login_fail.login_lock_begin_time, '%Y-%m-%d') &gt;= #{queryForm.loginLockBeginTimeBegin}
            </if>
            <if test="queryForm.loginLockBeginTimeEnd != null">
                AND DATE_FORMAT(t_login_fail.login_lock_begin_time, '%Y-%m-%d') &lt;= #{queryForm.loginLockBeginTimeEnd}
            </if>
        </where>
        order by t_login_fail.update_time desc
    </select>


    <select id="selectByUserIdAndUserType"
            resultType="com.zzz.platform.api.login.entity.LoginFailEntity">
        select *
        from t_login_fail
        where user_id = #{userId}
          and user_type = #{userType}
    </select>

    <delete id="deleteByUserIdAndUserType">
        delete
        from t_login_fail
        where user_id = #{userId}
          and user_type = #{userType}
    </delete>


</mapper>